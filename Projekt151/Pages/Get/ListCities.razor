@using Projekt151.Model

@page "/listcities"
@inject Services.IStadtService StadtService
@inject Services.IRoleService RoleService

<h2>City Details</h2>
<p>
    <a href="/addcity">Create New City</a>
</p>

@if (cities == null)
{
<p><em>Loading...</em></p> }
            else
            {
<table class='table'>
    <thead>
        <tr>
            <th>Name</th>
            <th>State</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var city in cities)
        {
<tr>
    <td>@city.StadtName</td>
    <td>
        @if (role.RoleName == "Admin")
        {
            <a href='/editcity/@city.StadtId'>Edit</a>
                                    <a href='/deletecity/@city.StadtId'>Delete</a>
                                }
    </td>
</tr>}
    </tbody>
</table>}

@code { IEnumerable<Stadt> cities;
    Role role = new Role();
            protected override async Task OnInitializedAsync()
            {
        role = await RoleService.SingleRole(1);
                cities = await StadtService.GetCities();
            } }